#!/bin/bash 

BASE="/Users/Pranav/Documents/Research"
FASTQC="/Applications/Fastqc.app/Contents/MacOS/fastqc"

RESULTS=${BASE}/AnalysisResults
TOOLS=${BASE}/AnalysisTools

RAW=${RESULTS}/Raw
REF=${RESULTS}/Reference
READS=${RESULTS}/Reads
COUNTS=${RESULTS}/Counts
ALIGN=${RESULTS}/Align
INDEX=${RESULTS}/Index
QC=${RESULTS}/QC

if [ -z $1 ] || [ -z $2 ] 
then
	echo "you must enter <./thisFileName> <path/to/file> <paired/single>"
else
	rawname=`echo $1 | cut -f1 -d'.'`
	echo "--------------------------------------"
	echo "Welcome to BASH script"
	echo "Beginning process..."
	if [ $2 = "single" ]
	then 
		echo "making single FASTQ file from SRA..."
		echo "------------------------------------"
		cd ${TOOLS}/sratoolkit/bin
		./fastq-dump -O ${RAW} $1
		echo "------------------------------------"
		echo "DONE"
		echo "------------------------------------"
		echo "generating quality control reports using FASTQC"
		$FASTQC --threads 8 ${rawname}*.fastq -o ${QC}
		echo "DONE"
	elif [ $2 = "paired" ]
	then
		echo "making two FASTQ files from SRA..."
		echo "----------------------------------"
		cd ${TOOLS}/sratoolkit/bin
		./fastq-dump -O ${RAW} -I --split-files $1
		echo "----------------------------------"
		echo "DONE"
		echo "------------------------------------"
		echo "generating quality control reports using FASTQC"
        	cd ${FASTQC}
		$FASTQC --threads 8 ${rawname}_1.fastq -o ${QC}
		echo "-----------------------------------------"
		$FASTQC --threads 8 ${rawname}_2.fastq -o ${QC}
        	echo "DONE"
	else 
		echo "please enter a valid layout"
	fi 
fi
